class Color{constructor(...t){if(this.alpha=1,1===t.length&&"string"==typeof t[0]){let r=t[0].trim().toLowerCase();if(/^#?([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(r)){let s=r.startsWith("#")?r.slice(1):r;4===s.length?(this.alpha=parseInt(s[3]+s[3],16)/255,s=s.substring(0,3)):8===s.length&&(this.alpha=parseInt(s.substring(6,8),16)/255,s=s.substring(0,6)),this.initFromHex(s);return}if(r.startsWith("rgb")){let i=Color.parseRgbString(r);this.alpha=void 0!==i.a?Color.normalizeAlpha(i.a):1,this.initFromRgb(i.r,i.g,i.b);return}if(r.startsWith("hsl")){let h=Color.parseHslString(r);this.alpha=void 0!==h.a?Color.normalizeAlpha(h.a):1,this.initFromHsl(h.h,h.s,h.l);return}throw Error("Unsupported color string: "+r)}if((3===t.length||4===t.length)&&t.every(t=>"number"==typeof t)){this.alpha=4===t.length?Color.normalizeAlpha(t[3]):1,this.initFromRgb(t[0],t[1],t[2]);return}if(1===t.length&&"object"==typeof t[0]){let e=t[0];if("r"in e&&"g"in e&&"b"in e){this.alpha="a"in e?Color.normalizeAlpha(e.a):1,this.initFromRgb(e.r,e.g,e.b);return}if("h"in e&&"s"in e&&"l"in e){this.alpha="a"in e?Color.normalizeAlpha(e.a):1,this.initFromHsl(e.h,e.s,e.l);return}throw Error("Unsupported object format")}throw Error("Invalid constructor arguments")}initFromRgb(t,r,s){this.rgb={r:t,g:r,b:s},this.hex=Color.rgbToHex(this.rgb),this.hsl=Color.rgbToHsl(this.rgb),this.type="rgb"}initFromHsl(t,r,s){this.hsl={h:t,s:r,l:s},this.rgb=Color.hslToRgb(this.hsl),this.hex=Color.rgbToHex(this.rgb),this.type="hsl"}initFromHex(t){this.hex="#"+t,this.rgb=Color.hexToRgb(this.hex),this.hsl=Color.rgbToHsl(this.rgb),this.type="hex"}static normalizeAlpha(t){return"number"==typeof t?Math.max(0,Math.min(1,t)):parseInt(t,16)/255}static hexToRgb(t){let r=t.replace("#","");3===r.length&&(r=r.split("").map(t=>t+t).join(""));let s=parseInt(r,16);return{r:s>>16&255,g:s>>8&255,b:255&s}}static rgbToHex({r:t,g:r,b:s}){let i=t=>t.toString(16).padStart(2,"0");return"#"+i(t)+i(r)+i(s)}static parseRgbString(t){let r=t.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d\.]+))?\)/i);return{r:+r[1],g:+r[2],b:+r[3],a:void 0!==r[4]?+r[4]:void 0}}static parseHslString(t){let r=t.match(/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%(?:\s*,\s*([\d\.]+))?\)/i);return{h:+r[1],s:+r[2],l:+r[3],a:void 0!==r[4]?+r[4]:void 0}}static rgbToHsl({r:t,g:r,b:s}){t/=255,r/=255,s/=255;let i=Math.max(t,r,s),h=Math.min(t,r,s),e,l,a=(i+h)/2;if(i===h)e=l=0;else{let o=i-h;switch(l=a>.5?o/(2-i-h):o/(i+h),i){case t:e=(r-s)/o+(r<s?6:0);break;case r:e=(s-t)/o+2;break;case s:e=(t-r)/o+4}e*=60}return{h:Math.round(e),s:+(100*l).toFixed(2),l:+(100*a).toFixed(2)}}static hslToRgb({h:t,s:r,l:s}){r/=100,s/=100;let i=(1-Math.abs(2*s-1))*r,h=i*(1-Math.abs(t/60%2-1)),e=s-i/2,l=0,a=0,o=0;return 0<=t&&t<60?[l,a,o]=[i,h,0]:60<=t&&t<120?[l,a,o]=[h,i,0]:120<=t&&t<180?[l,a,o]=[0,i,h]:180<=t&&t<240?[l,a,o]=[0,h,i]:240<=t&&t<300?[l,a,o]=[h,0,i]:[l,a,o]=[i,0,h],{r:Math.round((l+e)*255),g:Math.round((a+e)*255),b:Math.round((o+e)*255)}}static random(){return new Color({h:Math.floor(360*Math.random()),s:40+60*Math.random(),l:30+50*Math.random()})}static randomList(t=5){let r=[];for(let s=0;s<t;s++)r.push(Color.random());return r}plus(t){let r=Math.round((this.rgb.r+t.rgb.r)/2),s=Math.round((this.rgb.g+t.rgb.g)/2),i=Math.round((this.rgb.b+t.rgb.b)/2);return new Color({r,g:s,b:i,a:(this.alpha+t.alpha)/2})}minus(t){let r=t=>Math.max(0,Math.min(255,t)),s=r(this.rgb.r-t.rgb.r),i=r(this.rgb.g-t.rgb.g),h=r(this.rgb.b-t.rgb.b);return new Color({r:s,g:i,b:h,a:this.alpha})}mix(t,r=.5){r=Math.max(0,Math.min(1,r));let s=Math.round(this.rgb.r*(1-r)+t.rgb.r*r),i=Math.round(this.rgb.g*(1-r)+t.rgb.g*r),h=Math.round(this.rgb.b*(1-r)+t.rgb.b*r),e=this.alpha*(1-r)+t.alpha*r;return new Color({r:s,g:i,b:h,a:e})}multiply(t){let r=Math.round(this.rgb.r/255*(t.rgb.r/255)*255),s=Math.round(this.rgb.g/255*(t.rgb.g/255)*255),i=Math.round(this.rgb.b/255*(t.rgb.b/255)*255);return new Color({r,g:s,b:i,a:this.alpha*t.alpha})}lighten(t){let r={...this.hsl};return r.l=Math.min(100,r.l+t),new Color({...r,a:this.alpha})}darken(t){let r={...this.hsl};return r.l=Math.max(0,r.l-t),new Color({...r,a:this.alpha})}saturate(t){let r={...this.hsl};return r.s=Math.min(100,r.s+t),new Color({...r,a:this.alpha})}desaturate(t){let r={...this.hsl};return r.s=Math.max(0,r.s-t),new Color({...r,a:this.alpha})}getShades(t=5,r=30){t<2&&(t=2);let s=this.hsl.l,i=this.hsl.h,h=this.hsl.s,e=[];for(let l=0;l<t;l++){let a=(l-(t-1)/2)/((t-1)/2),o=s+a*r;o=Math.max(0,Math.min(100,o)),e.push(new Color({h:i,s:h,l:o,a:this.alpha}))}return e}getScale(t=5){t<2&&(t=2);let r=this.hsl.h,s=this.hsl.s,i=[];for(let h=0;h<t;h++){let e=h/(t-1),l=10+80*e;i.push(new Color({h:r,s,l,a:this.alpha}))}return i}toHex(){return this.hex}toHex8(){let t=Math.round(255*this.alpha).toString(16).padStart(2,"0");return this.hex+t}toRgbString(){let{r:t,g:r,b:s}=this.rgb;return`rgb(${t}, ${r}, ${s})`}toRgbaString(){let{r:t,g:r,b:s}=this.rgb;return`rgba(${t}, ${r}, ${s}, ${this.alpha})`}toHslString(){let{h:t,s:r,l:s}=this.hsl;return`hsl(${t}, ${r}%, ${s}%)`}toHslaString(){let{h:t,s:r,l:s}=this.hsl;return`hsla(${t}, ${r}%, ${s}%, ${this.alpha})`}toString(t="auto"){if("hex"===t)return this.toHex();if("hex8"===t)return this.toHex8();if("rgb"===t)return this.toRgbString();if("rgba"===t)return this.toRgbaString();if("hsl"===t)return this.toHslString();if("hsla"===t)return this.toHslaString();switch(this.type){case"hex":break;case"rgb":return 1===this.alpha?this.toRgbString():this.toRgbaString();case"hsl":return 1===this.alpha?this.toHslString():this.toHslaString()}return 1===this.alpha?this.toHex():this.toHex8()}}